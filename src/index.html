<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Smart Banking System</title>
  <style>
    body { font-family: Arial, sans-serif; background: #eef2f3; padding: 20px; }
    .container { max-width: 600px; margin: auto; background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.2); }
    input, select { width: 100%; padding: 10px; margin-top: 6px; border: 1px solid #ccc; border-radius: 5px; }
    button { margin-top: 10px; padding: 10px; border:none; border-radius: 5px; background: #007bff; color: white; font-size: 16px; cursor: pointer; }
    button:hover { background: #0056b3; }
    table { width: 100%; border-collapse: collapse; margin-top: 15px; }
    th, td { border: 1px solid #ccc; padding: 10px; text-align: center; }
    .toast { position: fixed; bottom: 20px; right: 20px; background: #222; color: white; padding: 12px 20px; border-radius: 5px; display: none; }
  </style>
</head>
<body>

<div class="container">
  <h2>üè¶ Smart Banking System</h2>

  <label>Account Number</label>
  <input type="text" id="accNo" value="100245">

  <label>Account Holder</label>
  <input type="text" id="accName" value="Anurag Patel">

  <label>Initial Balance</label>
  <input type="text" id="initialBalance" value="5000">

  <label>Currency</label>
  <select id="currency">
    <option value="INR">‚Çπ INR</option>
    <option value="USD">$ USD</option>
    <option value="EUR">‚Ç¨ EUR</option>
  </select>

  <hr>

  <label>Transaction Type</label>
  <select id="type">
    <option value="">Select</option>
    <option value="deposit">Deposit</option>
    <option value="withdraw">Withdraw</option>
  </select>

  <label>Amount</label>
  <input type="text" id="amount" placeholder="Enter Amount">

  <button onclick="bank.addTransaction()">‚ûï Add Transaction</button>
  <button onclick="bank.process()">üöÄ Process</button>

  <h3>Applied Transactions</h3>
  <table id="applied"></table>

  <h3>Rejected Transactions</h3>
  <table id="rejected"></table>

  <h3>Summary</h3>
  <p id="summary"></p>
</div>

<div id="toast" class="toast"></div>

<script>
class BankingSystem {
  constructor() {
    this.transactions = JSON.parse(localStorage.getItem("bankData")) || [];
  }

  notify(message, color="green") {
    const toast = document.getElementById("toast");
    toast.style.background = color;
    toast.innerText = message;
    toast.style.display = "block";
    setTimeout(() => toast.style.display = "none", 2000);
  }

  format(amount) {
    return new Intl.NumberFormat("en-IN", { style: "currency", currency: document.getElementById("currency").value }).format(amount);
  }

  addTransaction() {
    const type = document.getElementById("type").value;
    const amount = document.getElementById("amount").value;

    if (!type || !amount) return this.notify("Please fill transaction fields!", "red");

    this.transactions.push({ id: Date.now(), type, amount });
    this.notify("Transaction Added ‚úî");
    localStorage.setItem("bankData", JSON.stringify(this.transactions));
  }

  process() {
    const applied = [];
    const rejected = [];

    let balance = Number(document.getElementById("initialBalance").value);

    try {
      for (let t of this.transactions) {
        let amount = Number(t.amount);

        if (!t.type) { rejected.push({...t, reason:"Missing Type"}); continue; }
        if (isNaN(amount) || amount <= 0) { rejected.push({...t, reason:"Invalid Amount"}); continue; }

        if (t.type === "deposit") {
          balance += amount;
          applied.push({...t, amount});
        } else if (t.type === "withdraw") {
          if (amount > balance) rejected.push({...t, reason:"Insufficient Balance"});
          else { balance -= amount; applied.push({...t, amount}); }
        } else {
          rejected.push({...t, reason:"Unknown Type"});
        }
      }
    } 
    catch (error) {
      rejected.push({type: "SYSTEM", amount:"-", reason:error.message});
    }
    finally {
      this.render(applied, rejected, balance);
      this.notify("Processing Complete üîç", "#333");
    }
  }

  render(applied, rejected, balance) {

    document.getElementById("applied").innerHTML =
      `<tr><th>ID</th><th>Type</th><th>Amount</th></tr>${applied.map(a => 
      `<tr><td>${a.id}</td><td>${a.type}</td><td>${this.format(a.amount)}</td></tr>`).join("")}`;

    document.getElementById("rejected").innerHTML =
      `<tr><th>ID</th><th>Type</th><th>Amount</th><th>Reason</th></tr>${rejected.map(r => 
      `<tr><td>${r.id}</td><td>${r.type}</td><td>${r.amount}</td><td>${r.reason}</td></tr>`).join("")}`;

    document.getElementById("summary").innerHTML = `
      <strong>Final Balance:</strong> ${this.format(balance)} <br>
      <strong>Audit:</strong> ‚úî Completed Safe Execution
    `;
  }
}

const bank = new BankingSystem();
</script>

</body>
</html>
